<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ativas Extract</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-title">Ativas Extract</div>
      <div class="brand-sub">Tracker de Cards (Push / Banner / Marketing Screen)</div>
    </div>

    <div class="topbar-actions">
      <button id="btnExport" class="btn">Exportar backup</button>
      <label class="btn btn-secondary file-label">
        Importar backup
        <input id="fileImport" type="file" accept="application/json" />
      </label>
      <div id="backupStamp" class="stamp"></div>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <div class="panel">
        <div class="panel-title">Criar item (colar texto do card)</div>

        <label class="label">Card (texto completo)</label>
        <textarea id="inputCard" class="textarea" placeholder="Cole aqui o texto do card da XP..."></textarea>

        <div class="row">
          <div class="col">
            <label class="label">Always On?</label>
            <select id="selectAlwaysOn" class="select">
              <option value="no">Não</option>
              <option value="yes">Sim</option>
            </select>
          </div>
          <div class="col">
            <label class="label">Pausado por incidente?</label>
            <select id="selectIncidentPaused" class="select">
              <option value="no">Não</option>
              <option value="yes">Sim</option>
            </select>
          </div>
        </div>

        <div class="row">
          <button id="btnParseCreate" class="btn btn-primary">Criar a partir do card</button>
          <button id="btnClearInput" class="btn btn-secondary">Limpar</button>
        </div>

        <div class="hint">
          Importante: agora 1 item representa 1 card (mesmo com mix de canais). Push/Banner/MktScreen ficam readonly.
        </div>
      </div>

      <div class="panel">
        <div class="panel-title">Filtros</div>
        <div class="filters">
          <button class="chip active" data-view="incident">Incidente (D+0 a D+7)</button>
          <button class="chip" data-view="activeToday">Ativos hoje</button>
          <button class="chip" data-view="alwaysOn">Always On</button>
          <button class="chip" data-view="all">Todos</button>
          <button class="chip" data-view="archived">Arquivados</button>
        </div>

        <label class="label">Buscar</label>
        <input id="searchBox" class="input" placeholder="Nome do card/código..." />
      </div>

      <div class="panel">
        <div class="panel-title">Itens</div>
        <div id="itemsList" class="list"></div>
      </div>
    </aside>

    <section class="content">
      <div id="emptyState" class="empty">
        Selecione um item à esquerda para ver detalhes.
      </div>

      <div id="detail" class="detail hidden">
        <div class="detail-header">
          <div class="detail-title" id="detailTitle">—</div>
          <div class="detail-actions">
            <button id="btnArchive" class="btn btn-secondary">Arquivar</button>
            <button id="btnDelete" class="btn btn-danger">Deletar</button>
          </div>
        </div>

        <div class="grid2">
          <div class="card">
            <div class="card-title">Identificação</div>

            <label class="label">Nome (display)</label>
            <input id="fieldName" class="input" />

            <label class="label">Link do card (opcional)</label>
            <input id="fieldCardUrl" class="input" placeholder="https://..." />

            <div class="row">
              <div class="col">
                <label class="label">Always On?</label>
                <select id="fieldAlwaysOn" class="select">
                  <option value="no">Não</option>
                  <option value="yes">Sim</option>
                </select>
              </div>
              <div class="col">
                <label class="label">Pausado por incidente?</label>
                <select id="fieldIncidentPaused" class="select">
                  <option value="no">Não</option>
                  <option value="yes">Sim</option>
                </select>
              </div>
            </div>

            <label class="label">Notas</label>
            <textarea id="fieldNotes" class="textarea small"></textarea>

            <div class="row">
              <button id="btnSave" class="btn btn-primary">Salvar</button>
              <button id="btnReparse" class="btn btn-secondary">Reprocessar (colar de novo)</button>
            </div>
          </div>

          <div class="card">
            <div class="card-title">Eventos / Vigência</div>
            <div id="eventsInfo" class="meta"></div>

            <div class="subcard">
              <div class="subcard-title">Eventos (datas)</div>
              <div id="eventsTable"></div>
            </div>

            <div class="subcard">
              <div class="subcard-title">Operação</div>
              <div class="ops">
                <div><span class="k">Início efetivo:</span> <span id="effectiveStart">—</span></div>
                <div><span class="k">Fim efetivo:</span> <span id="effectiveEnd">—</span></div>
                <div><span class="k">Fim + buffer:</span> <span id="bufferEnd">—</span></div>
                <div><span class="k">Próxima revisão:</span> <span id="nextReview">—</span></div>
              </div>
              <div class="hint">
                “Fim efetivo” vem do último touch (push) ou do fim de janela (banner). MktScreen é informativo.
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">Canais (readonly)</div>

          <div class="subcard">
            <div class="subcard-title">Push</div>
            <div id="pushTable"></div>
          </div>

          <div class="subcard">
            <div class="subcard-title">Banner</div>
            <div id="bannerTable"></div>
          </div>

          <div class="subcard">
            <div class="subcard-title">Marketing Screen</div>
            <div id="mktInfo"></div>
            <div id="mktBlocks"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">Timeline (visão de calendário)</div>
          <div id="timeline"></div>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="js/app.js"></script>
</body>
</html>
